{
    "Caption":"$(L, map)",
   "Controls":[
      {  
         "_Type":"Control.Type.Extension",
         "Module": "extension-MapFramework",
         "Control":"MapExtensionWithContext",
         "Class":"MapExtensionWithContext",
         "_Name":"MapExtensionControl",
         "DataSubscriptions": ["MarkedJob"], 
         "ExtensionProperties": {
            "Config": {
				"Target": {
					"EntitySet": "GISMapParameters",
					"Service": "/SAPAssetManager/Services/AssetManager.service",
					"Properties": [],
					"KeyProperties": []
				},
				"ViewConfig": {
                    "ZoomOnLocationEnabled": false,
                    "UseDynamicLayerDisplayPrefs": true
				},
				"BaseMaps": [],
				"FeatureLayers": []
			},
			"MapToolsetIcons": [{
					"name": "search",
					"normalAssetName": "Search",
					"isVisible": true,
					"isEnabled": true
				},
				{
					"name": "settings",
					"normalAssetName": "Information",
					"isVisible": true,
					"isEnabled": true
				},
				{
					"name": "currentLocation",
					"normalAssetName": "Location",
					"selectedAssetName": "LocationEnabled",
					"isVisible": true,
					"isEnabled": true
				},
				{
					"name": "zoomExtents",
					"normalAssetName": "ZoomExtent",
					"isVisible": true,
					"isEnabled": true
				}
			],
            "SettingsControl": {
                "Title": "$(L, settings)",
                "CloseActionTitle": "$(L, map_settings_close)",
                "BasemapsTitle": "$(L,bm_title)",
				"FeatureLayersTitle": "$(L, fl_title)",
				"NearMe": {
					"DistanceTitle": "$(L, map_nearme_dist_title)",
					"UnitsTitle": "$(L, map_nearme_unit_title)",
					"Distances": [0.5, 1.0, 2.0, 5.0],
					"Units": [{
							"Value": "Mi",
							"Display": "$(L, map_nearme_mi)"
						},
						{
							"Value": "Km",
							"Display": "$(L, map_nearme_km)"
						}
					]
				},
                "BatterySavingTitle": "$(L, battery_saving_switch_title)",
                "BatterySavingDesc": "$(L, battery_saving_switch_desctiption)"
			},
            "InfoPanel": {
                "DirectionsButtonText": "$(L, map_info_panel_directions)"
            },
			"SearchControl": {
				"SearchPlaceholder": "$(L, map_search_placeholder)",
				"SearchFields": [
					"Title", "Footnote", "Subhead", "Description"
				],
				"IsResultTextDisplayed": true,
				"ResultsPrefix": "$(L, map_search_results_pref)",
				"ResultsSuffix": "$(L, map_search_results_sufx)",
				"NearMeFilterName": "$(L, map_search_nearme)",
				"QuickFilters": [{
						"FilterType": "TimeFilter",
						"Type": [
							"Job"
						],
						"Name": "$(L, map_search_wo_due_today)",
						"PeriodInDays": 1,
						"PropertyName": "DueDate"
					},
					{
						"FilterType": "TextFilter",
						"Name": "$(L, map_search_high_priority)",
						"Properties": [
							"StatusText"
						],
						"Text": "High"
					}
				]
            },
            "BusinessObjects": [{
                "Type": "Job",
                "Title": "$(L,workorders)",
                "Legend": "MarkerJob",
                "Target": {
                    "EntitySet": "MyWorkOrderHeaders",
                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                    "QueryOptions": "$expand=WOGeometries/Geometry,MobileStatus,MarkedJob&$filter=WOGeometries/any(wg:sap.entityexists(wg/Geometry))"
                },
                "Enable": true,
                "ObjectScheme": {
                    "Geometry": "WOGeometries/Geometry/GeometryValue",
                    "Layer": "Job",
                    "Properties": {
                        "ID": "{OrderId}",
                        "Priority": "{Priority}",
                        "Title": "/SAPAssetManager/Rules/WorkOrders/WorkOrderDescription.js",
                        "Subhead": "$(L,workorder_x,{OrderId})",
                        "StatusText": "/SAPAssetManager/Rules/Maps/PriorityStatusText.js",
                        "StatusImage": "/SAPAssetManager/Rules/Maps/PriorityBadge.js",
                        "SubstatusText": "/SAPAssetManager/Rules/Maps/PrioritySubstatusText.js",
                        "Tags": [
                            "{OrderType}",
                            "/SAPAssetManager/Rules/Maps/MapWorkOrderStatus.js"
                        ],
                        "BodyText": "/SAPAssetManager/Rules/Maps/MapWorkOrderWorkCenter.js",
                        "Footnote": "/SAPAssetManager/Rules/Maps/MapWorkOrderDueDate.js",
                        "ButtonText":"$(L, map_info_panel_directions)",
                        "DateProperties": {
                            "DueDate": "{DueDate}",
                            "DateFormat": "yyyy-MM-dd"
                        }
                    },
                    "Actions": [
                        {
                            "Title": "$(L, action_create_workorder)",
                            "Icon": "ActionAdd",
                            "Type": "Create",
                            "CallbackInfo": {
                                "Action": "/SAPAssetManager/Rules/WorkOrders/CreateUpdate/WorkOrderCreateNav.js",
                                "Target": {
                                    "EntitySet": "MyWorkOrderHeaders",
                                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                                    "Properties": [],
                                    "KeyProperties": []
                                }
                            }
                        },
                        {
                            "Title": "$(L, action_update_workorder)",
                            "Icon": "ActionEdit",
                            "Type": "Update",
                            "CallbackInfo": {
                                "Action": "/SAPAssetManager/Rules/WorkOrders/WorkOrderUpdateNav.js",
                                "Target": {
                                    "EntitySet": "MyWorkOrderHeaders",
                                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                                    "QueryOptions": "$expand=Operations/OperationLongText,Equipment,FunctionalLocation,HeaderLongText,MobileStatus,WODocuments&$filter=OrderId eq '{OrderId}'",
                                    "Properties": [],
                                    "KeyProperties": []
                                }
                            }
                        },
                        {
                            "Title": "$(L,favorite)",
                            "Icon": "/SAPAssetManager/Rules/Maps/MarkFavoriteAction/Icon.js",
                            "Type": "Update",
                            "CallbackInfo": {
                                "Action": "/SAPAssetManager/Rules/Maps/MarkFavoriteAction/UpdateIsMarked.js",
                                "Target": {
                                    "EntitySet": "MyWorkOrderHeaders",
                                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                                    "QueryOptions": "$expand=MarkedJob&$filter=OrderId eq '{OrderId}'",
                                    "Properties": [],
                                    "KeyProperties": []
                                }
                            }
                        }
                    ],
                    "Symbol": {
                        "marker": "/SAPAssetManager/Rules/Maps/Icons/WorkOrderIcon.js",
                        "styleWidth": "/SAPAssetManager/Rules/Maps/MarkerSizeWidth.js",
                        "styleHeight": "/SAPAssetManager/Rules/Maps/MarkerSizeHeight.js",
                        "lineColor": "295171",
                        "fillColor": "29517133",
                        "lineWidth": 2,
                        "yOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "xOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "onSelect": {
                            "marker": "/SAPAssetManager/Rules/Maps/Icons/SelectedWorkOrderIcon.js",
                            "styleWidth": 56,
                            "styleHeight": 68,
                            "xOffset": 0,
                            "yOffset": 32
                        }
                    }
                }
            },
            {
                "Type": "Equipment",
                "Title": "$(L, dl_equip)",
                "Legend": "MarkerAsset",
                "Target": {
                    "EntitySet": "MyEquipments",
                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                    "QueryOptions": "$expand=EquipGeometries/Geometry&$filter=EquipGeometries/any(eg:sap.entityexists(eg/Geometry))",
                    "Properties": [],
                    "KeyProperties": []
                },
                "Enable": true,
                "ObjectScheme": {
                    "Geometry": "EquipGeometries/Geometry/GeometryValue",
                    "Layer": "Equipment",
                    "Properties": {
                        "ID": "{EquipId}",
                        "Title": "{EquipDesc}",
                        "Subhead": "$(L, equipment_x, {EquipId})",
                        "StatusText": "/SAPAssetManager/Rules/Maps/PriorityStatusText.js",
                        "StatusImage": "/SAPAssetManager/Rules/Maps/PriorityBadge.js",
                        "SubstatusText": "/SAPAssetManager/Rules/Maps/PrioritySubstatusText.js",
                        "Tags": [
                            "{EquipType}",
                            "{EquipCategory}"
                        ],
                        "BodyText": "/SAPAssetManager/Rules/Maps/MapEquipWorkCenter.js",
                        "ButtonText":"$(L, map_info_panel_directions)"
                    },
                    "Symbol": {
                        "marker": "/SAPAssetManager/Rules/Maps/Icons/EquipmentIcon.js",
                        "styleWidth": "/SAPAssetManager/Rules/Maps/MarkerSizeWidth.js",
                        "styleHeight": "/SAPAssetManager/Rules/Maps/MarkerSizeHeight.js",
                        "lineColor": "FFA325",
                        "fillColor": "FFA32533",
                        "lineWidth": 2,
                        "yOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "xOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "onSelect": {
                            "marker": "/SAPAssetManager/Rules/Maps/Icons/SelectedEquipmentIcon.js",
                            "styleWidth": 56,
                            "styleHeight": 68,
                            "yOffset": 32,
                            "xOffset": 0,
                            "lineWidth": 4
                        }
                    }
                }
            },
            {
                "Type": "FunctionalLocation",
                "Title": "$(L, dl_floc)",
                "Legend": "MarkerFunctionalLocation",
                "Target": {
                    "EntitySet": "MyFunctionalLocations",
                    "Service": "/SAPAssetManager/Services/AssetManager.service",
                    "QueryOptions": "$expand=FuncLocGeometries/Geometry&$filter=FuncLocGeometries/any(fg:sap.entityexists(fg/Geometry))",
                    "Properties": [],
                    "KeyProperties": []
                },
                "Enable": true,
                "ObjectScheme": {
                    "Geometry": "FuncLocGeometries/Geometry/GeometryValue",
                    "Layer": "FunctionalLocation",
                    "Properties": {
                        "ID": "{FuncLocId}",
                        "Title": "{FuncLocDesc}",
                        "Subhead": "$(L, function_location_x, {FuncLocId})",
                        "Tags": [
                            "{FuncLocType}"
                        ],
                        "BodyText": "/SAPAssetManager/Rules/Maps/MapFuncLocWorkCenter.js",
                        "ButtonText":"$(L, map_info_panel_directions)"
                    },
                    "Symbol": {
                        "marker": "MarkerFunctionalLocation",
                        "styleWidth": "/SAPAssetManager/Rules/Maps/MarkerSizeWidth.js",
                        "styleHeight": "/SAPAssetManager/Rules/Maps/MarkerSizeHeight.js",
                        "lineColor": "E8743B",
                        "fillColor": "E8743B33",
                        "lineWidth": 2,
                        "yOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "xOffset": "/SAPAssetManager/Rules/Maps/MarkerOffset.js",
                        "onSelect": {
                            "marker": "MarkerFunctionalLocationSelected",
                            "styleWidth": 56,
                            "styleHeight": 68,
                            "yOffset": 32,
                            "xOffset": 0,
                            "lineWidth": 4
                        }
                    }
                }
            }
            ]
         }
      }
   ],
   "_Type":"Page",
   "_Name":"WorkOrderMapDetailsPage"
}